{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\z00s600199\\\\OJT\\\\my-app-typescript\\\\src\\\\App.tsx\";\nimport React from 'react';\nimport { createFFmpeg, fetchFile } from '@ffmpeg/ffmpeg';\nimport './App.css';\n\nclass MovieForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const result = this.videoConverter(this.state.file);\n      result.then(result => {\n        const data = window.URL.createObjectURL(result.arrayBuffer);\n        const url = document.createElement('a');\n        url.href = data;\n        url.setAttribute('download', 'audio.wav');\n        url.click();\n      });\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  getFileInput(file) {\n    return new Promise(function (resolve, reject) {\n      const reader = new FileReader();\n      reader.onerror = reject;\n\n      reader.onload = function () {\n        resolve(reader.result);\n      };\n\n      reader.readAsBinaryString(file); // here the file can be read in different way Text, DataUrl, ArrayBuffer\n    });\n  }\n\n  manageUploadedFile(binary, file) {\n    console.log('the file size is ' + binary.length);\n    console.log('the file name is ' + file.name);\n    this.setState({\n      file: file\n    });\n  }\n\n  async videoConverter(file) {\n    const ffmpeg = createFFmpeg({\n      log: true\n    });\n    await ffmpeg.load();\n    ffmpeg.FS('writeFile', file.name, await fetchFile(file));\n    await ffmpeg.run('-i', file.name, 'audio.wav');\n    return ffmpeg.FS('readFile', 'audio.wav');\n  }\n\n  handleChange(event) {\n    if (event.target.files !== null) {\n      Array.from(event.target.files).forEach(file => {\n        this.getFileInput(file).then(binary => {\n          if (typeof binary === 'string') {\n            this.manageUploadedFile(binary, file);\n          } else {\n            console.log(\"binary is not string\");\n          }\n        }).catch(function (reason) {\n          console.log('error during upload ${reason}');\n          event.target.value = '';\n        });\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"video/mp4\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this);\n  }\n\n}\n\nexport default MovieForm;","map":{"version":3,"sources":["C:/Users/z00s600199/OJT/my-app-typescript/src/App.tsx"],"names":["React","createFFmpeg","fetchFile","MovieForm","Component","constructor","props","handleSubmit","event","preventDefault","result","videoConverter","state","file","then","data","window","URL","createObjectURL","arrayBuffer","url","document","createElement","href","setAttribute","click","handleChange","bind","getFileInput","Promise","resolve","reject","reader","FileReader","onerror","onload","readAsBinaryString","manageUploadedFile","binary","console","log","length","name","setState","ffmpeg","load","FS","run","target","files","Array","from","forEach","catch","reason","value","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { createFFmpeg, fetchFile } from '@ffmpeg/ffmpeg';\r\nimport './App.css';\r\n\r\n\r\n\r\ninterface SquarePropsInterface {\r\n}\r\n\r\ninterface SquareStateInterface {\r\n  file: File;\r\n}\r\n\r\n\r\n\r\nclass MovieForm extends React.Component<SquarePropsInterface, SquareStateInterface> {\r\n  constructor(props:SquarePropsInterface) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n  private getFileInput(file:File): Promise<string | ArrayBuffer | null> {\r\n    return new Promise(function (resolve, reject) {\r\n      const reader = new FileReader();\r\n      reader.onerror = reject;\r\n      reader.onload = function () { resolve(reader.result); };\r\n      reader.readAsBinaryString(file); // here the file can be read in different way Text, DataUrl, ArrayBuffer\r\n  });\r\n  }\r\n\r\n  private manageUploadedFile(binary:string, file: File) {\r\n    console.log('the file size is '+binary.length);\r\n    console.log('the file name is '+file.name);\r\n    this.setState({\r\n      file:file,\r\n    });\r\n  }\r\n\r\n  private async videoConverter(file:File):Promise<File> {\r\n      const ffmpeg = createFFmpeg({\r\n        log: true,\r\n      });\r\n      \r\n      await ffmpeg.load();\r\n      ffmpeg.FS('writeFile',file.name,await fetchFile(file));\r\n      await ffmpeg.run('-i',file.name, 'audio.wav');\r\n      return ffmpeg.FS('readFile','audio.wav');\r\n    \r\n  }\r\n  private handleChange(event:React.ChangeEvent<HTMLInputElement>) {\r\n    if (event.target.files !== null) {\r\n      Array.from(event.target.files).forEach(file => {\r\n        this.getFileInput(file)\r\n          .then((binary) => {\r\n            if (typeof binary === 'string'){\r\n              this.manageUploadedFile(binary,file);\r\n            } else {\r\n              console.log(\"binary is not string\");\r\n            }\r\n          }).catch(function (reason) {\r\n            console.log('error during upload ${reason}');\r\n            event.target.value = '';\r\n          })\r\n      })\r\n    }\r\n  }\r\n  handleSubmit = (event:React.FormEvent<HTMLFormElement>):void => {\r\n    event.preventDefault();\r\n    const result = this.videoConverter(this.state.file);\r\n    result.then((result) => {\r\n      const data = window.URL.createObjectURL(result.arrayBuffer);\r\n      const url = document.createElement('a');\r\n      url.href=data;\r\n      url.setAttribute('download','audio.wav');\r\n      url.click();\r\n    })\r\n    \r\n  }\r\n  render() {\r\n    return (\r\n    <div>\r\n      <form onSubmit={this.handleSubmit}>\r\n        <label>\r\n          Name:\r\n          <input type=\"file\" accept = \"video/mp4\" onChange={this.handleChange} />\r\n        </label>\r\n        <input type=\"submit\" value=\"Submit\" />\r\n      </form>\r\n      \r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieForm;\r\n\r\n"]},"metadata":{},"sourceType":"module"}